@(query:String, numberOfEesultsFoundByES:Int, results:scala.collection.mutable.ListBuffer[Map[String,String]])

<!DOCTYPE html>

<!--[if lt IE 7]>      <html class="ie6"> <![endif]-->
<!--[if IE 7]>         <html class="ie7"> <![endif]-->
<!--[if IE 8]>         <html class="ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html>         <!--<![endif]-->

  <head>
    <meta charset="utf-8">
    <title>Aid Information Platform</title>
    <!--[if IE 8]>
    <script type="text/javascript">
      (function(){if(window.opera){return;}
      setTimeout(function(){var a=document,g,b={families:(g=
      ["nta"]),urls:["/stylesheets/fonts-ie8.css]},
      c="javascripts/webfont-debug.js,d="script",
      e=a.createElement(d),f=a.getElementsByTagName(d)[0],h=g.length;WebFontConfig
      ={custom:b},e.src=c,f.parentNode.insertBefore(e,f);for(;h--;a.documentElement
      .className+=' wf-'+g[h].replace(/\s/g,'').toLowerCase()+'-n4-loading');},0)
      })()
    </script>
    <![endif]-->
    <!--[if gte IE 9]><!--><link type="text/css" rel="stylesheet" media="screen" href="/stylesheets/fonts.css"><!--<![endif]-->


    <script src="/javascripts/jquery-base.js" type="text/javascript"></script>
    <!--[if lt IE 9]>
    <script src="/javascripts/ie-compat.js" type="text/javascript"></script>
    <![endif]-->

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link type="text/css" rel="stylesheet" href="/stylesheets/foundation.css">
    <link type="text/css" rel="stylesheet" href="/stylesheets/aip-styles.css">
	<link type="text/css" rel="stylesheet" href="/stylesheets/jquery-ui-1.10.2.custom.min.css" >
	
    <script src="/javascripts/jquery-1.9.0.min.js" type="text/javascript"></script>   
    <script src="/javascripts/searchFilters.js" type="text/javascript"></script>
	<script src="/javascripts/jquery-ui-1.10.2.custom.min.js" type="text/javascript"></script>
	
	
  </head>
  <body>
    <script type="text/javascript">document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script><a href="#content" class="visually-hidden">Skip to main content</a>
    @partials.header()
    <div class="page-wrapper">
    	<div class="row">
    		<div class="twelve columns">
    			<div class="disclaimer">
    				@partials.disclaimer()
    			</div>
    		</div>
    	</div>
    	<div class="row" id="page-title">
    		@partials.pageTitle()
    	</div>
        <div class="row">
        	@partials.search(query)
    	</div>            
        <div class="row">
         <div class="twelve columns">
         @if(results.isEmpty){
        	 <div class="search-result">  
        	 <p style="padding-top:.33em"> Your search - <em>@query</em> - did not match any documents.  </p> 
        	 <p style="margin-top:1em">Suggestions:</p> 
        	 <ul style="margin:0 0 2em;margin-left:1.3em">
        	 <li>Make sure all words are spelled correctly.</li>
        	 <li>Try different keywords.</li>
        	 <li>Try more general keywords.</li>
        	 <li>Try fewer keywords.</li>
        	 </ul> 
        	 </div>
         }else{
        	@partials.filters()
        	<div class="testResults" style="float: right; width: 70%; ">
        	<em>Showing <span name="afterFilteringAmount"></span> <span name="numberofResults" value="@results.size">@results.size</span> results</em>
        	<span name="sugestionSpan" style="display:none;"></span> 
        	@for(i <- 0 to results.size -1) {
        		@if(!results(i).get("status").isEmpty){
        		<div class="search-result">
            		<input type="hidden" name="status" value="@results(i).get("status")">
            		<input type="hidden" name="organizations" value="@results(i).get("organizations")">
            		<input type="hidden" name="countries" value="@results(i).get("countries")">
            		<input type="hidden" name="sectors" value="@results(i).get("sectors")">
            		<input type="hidden" name="regions" value="@results(i).get("regions")">
            		<input type="hidden" name="budget" value="@results(i).get("budget")">
        			<h3><a href="/projects/@results(i).get("id")">@results(i).get("title")&nbsp;<small>[@results(i).get("id")]</small></a></h3>
        			<p class="budget">Budget: <em>@results(i).get("formatedBudget")</em></p> 
        			<p class="budget" style="margin-top:-3px;">Status: <em>@results(i).get("status")</em></p>
        			<p class="description">@results(i).get("description")</p>
        		</div>
        		} else {
        			 <script>
        			 $(function() {
        				 $('span[name=numberofResults]').attr("value",$('span[name=numberofResults]').attr("value")-1)
        				 $('span[name=numberofResults]').html($('span[name=numberofResults]').attr("value"));
        				 $('span[name=sugestionSpan]').show();
        				 var budget = "@results(i).get("countryBudget")".replace(/(\d)(?=(?:\d{3})+$)/g, "$1,");
        				 $('span[name=sugestionSpan]').html("<br/><div class='suggested-country' style='background-color: #F0F0F0;font-size: 1.1em;margin: 20px 0;padding: 15px;'><p>Did you mean the <em>country <a href='/countries/@results(i).get("countryCode")'>@results(i).get("countryName")</a></em>?</p><p></p><h3><em>@results(i).get("countryName")</em></h3>Budget: <em>Â£"+budget+"</em><p></p></div>");
        				 
        			 });
        			 </script>
        		}
        	}
         }
        	</div>
         </div>
    	</div> 
    </div><!--end wrapper-->
    <div class="disclaimer">
    	<div class="row">
			@partials.disclaimer()
		</div>
	</div>
    @partials.footer()
	<span name="countries" value="@numberOfEesultsFoundByES)" style="display:none;" ></span>
    <span name="budget" value="" style="display:none;" ></span>
    <script src="http://uk1.siteimprove.com/js/siteanalyze_advanced.js" type="text/javascript" ></script>
    <script src="https://loader.engage.gsfn.us/loader.js" type="text/javascript" ></script>
  </body>
</html>




